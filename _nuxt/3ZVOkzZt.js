import{_ as R}from"./Dz8ypaWS.js";import{d as M,c as _,q as u,o as n,D as i,a1 as T,u as t,G as l,a5 as V,M as U,E as S,a as I,L as Z,X as E,_ as q,x as F,z as H,y as W,a3 as j,a4 as C,H as A,I as $,a8 as X,N as J,T as K}from"./D9IXZ7Wz.js";import{f as B,c as Q,a as v,i as G}from"./BLwoDY-X.js";import{b as x,u as ee,a as te,c as ae}from"./DS3366Fm.js";import{u as se}from"./BwJyOvYF.js";import{q as oe}from"./sbcClVx2.js";import"./IShi1APO.js";import"./CAgjCj6u.js";const ie={class:"article-item"},ne=["datetime","title"],re=["datetime","title"],le=M({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(N){const a=N,r=_(()=>a.useUpdated?a.updated:a.date),f=_(()=>r.value?B(new Date(r.value),"MM-dd"):""),y=_(()=>a.date?B(new Date(a.date),Q(a.updated,a.date)?"MM-dd":"yyyy-MM-dd"):"");return(e,k)=>{const h=E,d=V;return n(),u("li",ie,[i("time",{datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(t(r)),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(t(r))},l(t(f)),9,ne),T(d,{class:"article-link gradient-card",to:e.to,title:e.description},{default:U(()=>[i("span",{class:Z(["article-title",("getPostTypeClassName"in e?e.getPostTypeClassName:t(x))(e.type)])},l(e.title),3),e.useUpdated&&("isTimeDiffSignificant"in e?e.isTimeDiffSignificant:t(G))(e.date,e.updated)?(n(),u("time",{key:0,class:"aux-date",datetime:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(e.date),title:("getLocaleDatetime"in e?e.getLocaleDatetime:t(v))(e.date)},"  "+l(t(y)),9,re)):S("",!0),e.image?(n(),I(h,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):S("",!0)]),_:1},8,["to","title"])])}}}),de=q(le,[["__scopeId","data-v-eeb56120"]]),ce={class:"archive"},me={class:"archive-title"},ue={class:"archive-year"},pe={class:"archive-age"},ge={class:"archive-info"},_e={class:"archive-list"},fe=M({__name:"archive",async setup(N){let a,r;const f=F();H({title:"归档",meta:[{name:"description",content:`${f.title}的所有文章归档。`}]});const y=f.stats.birthYear;W().setAside(["blog-stats","connectivity","blog-log"]);const{data:k}=([a,r]=j(()=>se("posts_index",()=>oe().only(["_path","categories","image","date","description","readingTime","recommend","title","updated"]).where({_original_dir:{$eq:"/posts"}}).find(),{default:()=>[]})),a=await a,r(),a),{listSorted:h,isAscending:d,sortOrder:p}=ee(k),{category:D,categories:z,listCategorized:O}=te(h),w=_(()=>{const c=Object.entries(ae(O.value,s=>new Date(s[p.value]||0).getFullYear()));return d.value?c:c.reverse()}),P=_(()=>w.value.reduce((c,[s,g])=>{const L=(g==null?void 0:g.reduce((o,m)=>o+m.readingTime.words,0))||0;return c[s]=X(L),c},{}));return(c,s)=>{const g=R,L=de;return n(),u("div",ce,[T(g,{"is-ascending":t(d),"onUpdate:isAscending":s[0]||(s[0]=o=>C(d)?d.value=o:null),"sort-order":t(p),"onUpdate:sortOrder":s[1]||(s[1]=o=>C(p)?p.value=o:null),category:t(D),"onUpdate:category":s[2]||(s[2]=o=>C(D)?D.value=o:null),categories:t(z)},null,8,["is-ascending","sort-order","category","categories"]),(n(!0),u(A,null,$(t(w),([o,m])=>(n(),u("div",{key:o,class:"archive-group"},[i("div",me,[i("h2",ue,l(o),1),i("div",pe,[i("span",null,l(Number(o)-t(y)),1),s[3]||(s[3]=i("span",{class:"age-label"},"岁",-1))]),i("div",ge,[i("span",null,l(t(P)[o])+"字",1),i("span",null,l(m==null?void 0:m.length)+"篇",1)])]),i("menu",_e,[T(K,{appear:"",name:"float-in"},{default:U(()=>[(n(!0),u(A,null,$(m,(b,Y)=>(n(),I(L,J({key:b._path,ref_for:!0},b,{to:b._path,"use-updated":t(p)==="updated",style:{"--delay":`${Y*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)])]))),128))])}}}),Ne=q(fe,[["__scopeId","data-v-3a3cd1c7"]]);export{Ne as default};
