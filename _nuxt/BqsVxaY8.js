import{r as C,aF as D,ad as g,aq as q,aG as A,aH as E,d as B,P as F,aI as I,a3 as P,c as S,q as T,o as p,a1 as b,D as m,M as V,H as k,I as z,L as H,u as h,a as w,E as N,G,a6 as R,_ as $}from"./CcI2rQos.js";import{u as M}from"./Boz3zf26.js";import{q as O}from"./CeCKG0Mt.js";import"./IShi1APO.js";import"./X4n75iy8.js";const L=({delay:o},e)=>{let t,s=!0;const n=(...c)=>{s?(clearTimeout(t),t=setTimeout(()=>{s&&e(...c),t=void 0},o)):e(...c)};return n.isPending=()=>t!==void 0,n.cancel=()=>{s=!1},n.flush=(...c)=>e(...c),n},U=({interval:o},e)=>{let t=!0,s;const n=(...c)=>{t&&(e(...c),t=!1,s=setTimeout(()=>{t=!0,s=void 0},o))};return n.isThrottled=()=>s!==void 0,n},W=o=>U({interval:20},o),Y=o=>L({delay:20},o);function j(o){const e=W(o),t=Y(o);return()=>{e(),t()}}function J(o){const e=C(null),t=(f,i=[])=>(f.forEach(l=>{const u=document.getElementById(l.id);u&&i.push({id:l.id,offsetTop:u.offsetTop}),l.children&&t(l.children,i)}),i),s=D(()=>g(o),()=>t(g(o)).reverse()),n=()=>{const f=Number.parseFloat(getComputedStyle(document.documentElement).getPropertyValue("scroll-margin-top")),i=window.scrollY+(f||64),l=s.value.find(r=>r.offsetTop<=i);e.value=(l==null?void 0:l.id)||null;const u=document.querySelector("#z-aside"),a=document.querySelector(`#z-aside a[href="#${e.value}"]`);u==null||u.scroll({top:(a==null?void 0:a.offsetTop)||0})};q("scroll",j(()=>n()),{passive:!0});const{height:c}=A(document==null?void 0:document.body);return E(c,s.trigger),{activeTocItem:e}}const K=["href","title"],Q={class:"widget-title"},X={href:"#main-content","aria-label":"返回开头"},Z={href:"#twikoo","aria-label":"评论区"},ee={class:"widget-body"},te={key:1,class:"no-toc"},oe=B({__name:"Toc",async setup(o){let e,t;const s=F(),[n,c]=I(),{data:f}=([e,t]=P(()=>M(s.path,()=>O(s.path).findOne(),"$GTbUemPlen")),e=await e,t(),e),i=S(()=>{var a,r;return(r=(a=f.value)==null?void 0:a.body)==null?void 0:r.toc}),{activeTocItem:l}=J(()=>{var a;return((a=i.value)==null?void 0:a.links)??[]});function u(a,r){var _;return a.id===r?!0:((_=a.children)==null?void 0:_.some(v=>u(v,r)))??!1}return(a,r)=>{var v;const _=R;return p(),T(k,null,[b(h(n),null,{default:V(({tocItem:x})=>[m("ol",null,[(p(!0),T(k,null,z(x,(d,y)=>(p(),T("li",{key:y,class:H({"has-active":u(d,h(l)),active:d.id===h(l)})},[m("a",{href:`#${d==null?void 0:d.id}`,title:d.text},G(d.text),9,K),d.children?(p(),w(h(c),{key:0,"toc-item":d.children},null,8,["toc-item"])):N("",!0)],2))),128))])]),_:1}),m("h3",Q,[r[0]||(r[0]=m("span",{class:"title"},"文章目录",-1)),m("a",X,[b(_,{name:"ph:arrow-circle-up-bold"})]),m("a",Z,[b(_,{name:"ph:chat-circle-text-bold"})])]),m("div",ee,[(v=h(i))!=null&&v.links.length?(p(),w(h(c),{key:0,"toc-item":h(i).links},null,8,["toc-item"])):(p(),T("p",te," 暂无目录信息 "))])],64)}}}),re=$(oe,[["__scopeId","data-v-4ff50781"]]);export{re as default};
