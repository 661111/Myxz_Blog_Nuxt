import{x as K,y as R,z as T,A as N,r as i,B as V,m as q,q as r,C as G,D as e,E as z,F as B,G as n,H as y,I as O,J as P,K as Q,L as W,o as c}from"./BwkCYX-d.js";const X={class:"page-fcircle"},Y={class:"article-list"},Z={key:0,class:"random-article"},ee={class:"article-container gradient-card"},te={class:"article-author"},ae={class:"article-title"},se={class:"article-date"},oe={class:"articles-list"},ie=["onClick"],ne=["src"],le={class:"article-container gradient-card"},re={class:"article-author"},ce=["onClick"],de={class:"article-date"},ue={class:"load-more-container"},ve={class:"modal-content"},me=["src"],_e=["href"],he={id:"modal-articles-container"},ge=["href"],pe={class:"modal-article-date"},fe=["src"],be={__name:"moment",setup(ke){const U=K();R().setAside(["blog-stats","connectivity","blog-log","menugroup"]),T({title:"å‹é“¾æœ‹å‹åœˆ",meta:[{property:"og:type",content:"profile"},{name:"description",content:`${U.title}çš„å‹é“¾æœ‹å‹åœˆé¡µé¢ã€‚`}]});const u=N({private_api_url:"https://moments.myxz.top/",page_turning_number:20,error_img:"https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite@latest/static/favicon.ico"}),d=i([]),g=i([]),v=N({friends_num:0,active_num:0,article_num:0,last_updated_time:""}),m=i(0),b=i(!0),l=i(null),_=i(!1),A=i(""),p=i(""),C=i(""),S=i([]);V(()=>{$()}),q(()=>{window.removeEventListener("click",w)});const $=()=>{L()},L=async()=>{const t="friend-circle-lite-cache",s="friend-circle-lite-cache-time",a=new Date().getTime();try{if(localStorage){const I=localStorage.getItem(s);if(I&&a-I<10*60*1e3){const F=JSON.parse(localStorage.getItem(t));if(F){E(F);return}}}const h=await(await fetch(`${u.private_api_url}all.json`)).json();localStorage&&(localStorage.setItem(t,JSON.stringify(h)),localStorage.setItem(s,a.toString())),E(h)}catch(o){console.error("åŠ è½½æ–‡ç« å¤±è´¥:",o)}},E=t=>{v.friends_num=t.statistical_data.friends_num,v.active_num=t.statistical_data.active_num,v.article_num=t.statistical_data.article_num,v.last_updated_time=t.statistical_data.last_updated_time;const s=t.article_data,a=[...d.value,...s];d.value=a;const o=a.slice(m.value,m.value+u.page_turning_number);g.value=[...g.value,...o],m.value+=u.page_turning_number,b.value=m.value<a.length,l.value||M()},D=t=>t?t.substring(0,10):"",M=()=>{if(d.value.length>0){const t=Math.floor(Math.random()*d.value.length);l.value=d.value[t]}},f=t=>t||u.error_img,k=t=>{t.target.src=u.error_img},j=t=>{window.open(t,"_blank")},H=()=>{l.value&&window.open(l.value.link,"_blank")},J=(t,s,a)=>{A.value=t,p.value=s,C.value=new URL(a).origin,S.value=d.value.filter(o=>o.author===t).slice(0,4),_.value=!0,document.body.classList.add("overflow-hidden"),window.addEventListener("click",w)},w=t=>{t.target.id==="modal"&&x()},x=()=>{_.value=!1,document.body.classList.remove("overflow-hidden"),window.removeEventListener("click",w)};return(t,s)=>(c(),r(y,null,[s[2]||(s[2]=G('<link rel="stylesheet" href="/assets/css/moments.css"><div class="page-banner" style="background-image:url(/assets/img/page_backgroud/moment.webp);"><div class="banner-content"><h1>åšå‹åœˆ</h1><p>å‘ç°æ›´å¤šæœ‰è¶£çš„åšä¸»</p></div><div class="banner-extra"><div class="friend-stats"><div class="update-time">Updated at 2025-07-17</div><div class="powered-by">Powered by FriendCircleLite</div></div></div></div>',2)),e("div",X,[e("div",Y,[l.value?(c(),r("div",Z,[s[1]||(s[1]=e("div",{class:"random-container-title"},"éšæœºé’“é±¼",-1)),e("a",{href:"#",onClick:B(H,["prevent"]),class:"article-item"},[e("div",ee,[e("div",te,n(l.value.author),1),e("div",ae,n(l.value.title),1),e("div",se,n(l.value.created),1)])]),e("button",{class:"refresh-btn gradient-card",onClick:M},s[0]||(s[0]=[e("span",{class:"iconify i-ph:link-bold","aria-hidden":"true"},null,-1)]))])):z("",!0),e("div",oe,[(c(!0),r(y,null,O(g.value,(a,o)=>(c(),r("div",{key:o,class:"article-item"},[e("div",{class:"article-image",onClick:h=>J(a.author,a.avatar,a.link)},[e("img",{src:f(a.avatar),onError:k},null,40,ne)],8,ie),e("div",le,[e("div",re,n(a.author),1),e("div",{class:"article-title",onClick:h=>j(a.link)},n(a.title),9,ce),e("div",de,n(D(a.created)),1)])]))),128))]),e("div",ue,[P(e("button",{class:"load-more gradient-card",onClick:L}," å†æ¥äº¿ç‚¹ ",512),[[Q,b.value]])]),_.value?(c(),r("div",{key:1,id:"modal",class:W(["modal",{"modal-open":_.value}]),onClick:B(x,["self"])},[e("div",ve,[e("img",{id:"modal-author-avatar",src:f(p.value),onError:k},null,40,me),e("a",{id:"modal-author-name-link",href:C.value,target:"_blank"},n(A.value),9,_e),e("div",he,[(c(!0),r(y,null,O(S.value,(a,o)=>(c(),r("div",{key:o,class:"modal-article"},[e("a",{class:"modal-article-title",href:a.link,target:"_blank"},n(a.title),9,ge),e("div",pe,"ğŸ“…"+n(D(a.created)),1)]))),128))]),e("img",{id:"modal-bg",src:f(p.value),onError:k},null,40,fe)])],2)):z("",!0)])])],64))}};export{be as default};
