const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./IakWaBsR.js","./DAoEDWOQ.js","./entry.DAWpHqn6.css","./Alert.Dq3uSApk.css","./D08OC75W.js","./Blur.B-jU4pb_.css","./DONczftd.js","./C4e7VoVa.js","./LinkCard.BCx6LIBw.css","./DGFYpgip.js","./Pic.20TW4R_j.css","./DHqsUO8m.js","./ProseA.DhJIX4mV.css","./Dau8o3hy.js","./ProseCode.CujRHScX.css","./CjxK8I6e.js","./ProseTable.6LY-mIPy.css","./CyR7obyd.js","./Quote.BW1t6HpG.css","./C954cVyZ.js","./Tip.Dc-LhLuT.css"])))=>i.map(i=>d[i]);
import{d as V,ac as B,ad as Y,k as P,ae as k,a0 as tt,S as et,p as M,af as C,ag as R,ah as O,ai as rt,aj as $,ak as nt,al as h,am as ot,q as st,K as it,e as F,J as at,g as L,u as ut,o as ct,c as lt,f as E,C as pt}from"./DAoEDWOQ.js";import{f as ft,h as mt}from"./rJCbAzvX.js";import{t as dt}from"./B37-vG_X.js";const x=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],_t=["p","h1","h2","h3","h4","h5","h6","li"];function A(t,r){return t.type===r||typeof t.type=="object"&&t.type.tag===r||t.tag===r}function I(t){return A(t,"text")||A(t,Symbol.for("v-txt"))}function N(t){return Array.isArray(t.children)||typeof t.children=="string"?t.children:typeof t.children?.default=="function"?t.children.default():[]}function j(t){if(!t)return"";if(Array.isArray(t))return t.map(j).join("");if(I(t))return t.value||t.children||"";const r=N(t);return Array.isArray(r)?r.map(j).filter(Boolean).join(""):""}function H(t,r=[]){if(Array.isArray(t))return t.flatMap(n=>H(n,r));let e=t;return r.some(n=>n==="*"||A(t,n))&&(e=N(t)||t,!Array.isArray(e)&&_t.some(n=>A(t,n))&&(e=[e])),e}function q(t,r=[]){return t=Array.isArray(t)?t:[t],r.length?t.flatMap(e=>q(H(e,[r[0]]),r.slice(1))).filter(e=>!(I(e)&&j(e).trim()==="")):t}function U(t,r=[]){return typeof r=="string"&&(r=r.split(/[,\s]/).map(e=>e.trim()).filter(Boolean)),r.length?q(t,r).reduce((e,n)=>(I(n)?typeof e[e.length-1]=="string"?e[e.length-1]+=n.children:e.push(n.children):e.push(n),e),[]):t}function gt(t,r){return r.reduce((e,n)=>{const o=ht(t,n);return o!==void 0&&(e[n]=o),e},{})}function ht(t,r){return r.split(".").reduce((e,n)=>e&&e[n],t)}const S="default",z=/^@|^v-on:/,K=/^:|^v-bind:/,yt=/^v-model/,bt=["select","textarea","input"],vt=["math","svg"],Pt=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(t=>[t,`prose-${t}`])),Ct=V({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(t){const e=Y()?.appContext?.app?.$nuxt,n=e?.$route||e?._route,{mdc:o}=e?.$config?.public||{},i=P(()=>({...o?.components?.prose&&t.prose!==!1?Pt:{},...o?.components?.map||{},...k(t.data?.mdc?.components||{}),...t.components})),l=P(()=>{const a=(t.body?.children||[]).map(u=>u.tag||u.type).filter(u=>!x.includes(u));return Array.from(new Set(a)).sort().join(".")}),c=tt({...t.data});et(()=>t.data,a=>{Object.assign(c,a)}),await It(t.body,{tags:i.value});function p(a,u){const d=a.split(".").length-1;return a.split(".").reduce((_,g,T)=>T==d&&_?(_[g]=u,_[g]):typeof _=="object"?_[g]:void 0,c)}return{tags:i,contentKey:l,route:n,runtimeData:c,updateRuntimeData:p}},render(t){const{tags:r,tag:e,body:n,data:o,contentKey:i,route:l,unwrap:c,runtimeData:p,updateRuntimeData:a}=t;if(!n)return null;const u={...o,tags:r,$route:l,runtimeData:p,updateRuntimeData:a},d=e!==!1?D(e||u.component?.name||u.component||"div"):void 0;return d?B(d,{...u.component?.props,class:t.class,...this.$attrs,key:i},{default:_}):_?.();function _(){const g=W(n,B,{documentMeta:u,parentScope:u,resolveComponent:D});return g?.default?c?U(g.default(),typeof c=="string"?c.split(" "):["*"]):g.default():null}}});function Tt(t,r,e,n){const{documentMeta:o,parentScope:i,resolveComponent:l}=e;if(t.type==="text")return r(O,t.value);if(t.type==="comment")return r(rt,null,t.value);const c=t.tag,p=X(t,o.tags);if(t.tag==="binding")return xt(t,r,o,i);const a=Q(p)?_=>_:l;if(p==="script")return r("pre",{class:"script-to-pre"},`<script>
`+j(t)+`
<\/script>`);const u=a(p);typeof u=="object"&&(u.tag=c);const d=Ot(t,o);return n&&(d.key=n),r(u,d,W(t,r,{documentMeta:o,parentScope:{...i,...d},resolveComponent:a}))}function W(t,r,e){const{documentMeta:n,parentScope:o,resolveComponent:i}=e,c=(t.children||[]).reduce((a,u)=>{if(!St(u))return a[S].children.push(u),a;const d=Rt(u);return a[d]=a[d]||{props:{},children:[]},u.type==="element"&&(a[d].props=u.props,a[d].children.push(...u.children||[])),a},{[S]:{props:{},children:[]}});return Object.entries(c).reduce((a,[u,{props:d,children:_}])=>(_.length&&(a[u]=(g={})=>{const T=gt(g,Object.keys(d||{}));let s=_.map((f,m)=>Tt(f,r,{documentMeta:n,parentScope:{...o,...T},resolveComponent:i},String(f.props?.key||m)));return d?.unwrap&&(s=U(s,d.unwrap)),Dt(s)}),a),{})}function xt(t,r,e,n={}){const o={...e.runtimeData,...n,$document:e,$doc:e},i=/\.|\[(\d+)\]/,c=(t.props?.value.trim().split(i).filter(Boolean)).reduce((a,u)=>{if(a&&u in a)return typeof a[u]=="function"?a[u]():a[u]},o),p=t.props?.defaultValue;return r(O,c??p??"")}function Ot(t,r){const{tag:e="",props:n={}}=t;return Object.keys(n).reduce(function(o,i){if(i==="__ignoreMap")return o;const l=n[i];if(yt.test(i))return At(i,l,o,r,{native:bt.includes(e)});if(i==="v-bind")return jt(i,l,o,r);if(z.test(i))return wt(i,l,o,r);if(K.test(i))return Et(i,l,o,r);const{attribute:c}=ft(mt,i);return Array.isArray(l)&&l.every(p=>typeof p=="string")?(o[c]=l.join(" "),o):(o[c]=l,o)},{})}function At(t,r,e,n,{native:o}){const i=t.match(/^v-model:([^=]+)/)?.[1]||"modelValue",l=o?"value":i,c=o?"onInput":`onUpdate:${i}`;return e[l]=w(r,n.runtimeData),e[c]=p=>{n.updateRuntimeData(r,o?p.target?.value:p)},e}function jt(t,r,e,n){const o=w(r,n);return e=Object.assign(e,o),e}function wt(t,r,e,n){return t=t.replace(z,""),e.on=e.on||{},e.on[t]=()=>w(r,n),e}function Et(t,r,e,n){return t=t.replace(K,""),e[t]=w(r,n),e}const D=t=>{if(typeof t=="string"){if(x.includes(t))return t;const r=M(C(t),!1);return!t||r?.name==="AsyncComponentWrapper"||typeof r=="string"?r:"setup"in r?R(()=>new Promise(e=>e(r))):r}return t};function w(t,r){const e=t.split(".").reduce((n,o)=>typeof n=="object"?n[o]:void 0,r);return typeof e>"u"?nt(t):e}function Rt(t){let r="";for(const e of Object.keys(t.props||{}))if(!(!e.startsWith("#")&&!e.startsWith("v-slot:"))){r=e.split(/[:#]/,2)[1];break}return r||S}function St(t){return t.tag==="template"}function Q(t){return vt.includes(t)}function Dt(t){const r=[];for(const e of t){const n=r[r.length-1];e.type===O&&n?.type===O?n.children=n.children+e.children:r.push(e)}return r}async function It(t,r){if(!t)return;const e=Array.from(new Set(n(t,r)));await Promise.all(e.map(async o=>{if(o?.render||o?.ssrRender||o?.__ssrInlineRender)return;const i=D(o);i?.__asyncLoader&&!i.__asyncResolved&&await i.__asyncLoader()}));function n(o,i){const l=o.tag;if(o.type==="text"||l==="binding"||o.type==="comment")return[];const c=X(o,i.tags);if(Q(c))return[];const p=[];o.type!=="root"&&!x.includes(c)&&p.push(c);for(const a of o.children||[])p.push(...n(a,i));return p}}function X(t,r){const e=t.tag;return!e||typeof t.props?.__ignoreMap<"u"?e:r[e]||r[C(e)]||r[$(t.tag)]||e}const Bt=Object.assign(Ct,{__name:"MDCRenderer"}),Lt=()=>h(()=>import("./IakWaBsR.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),Vt=()=>h(()=>import("./D08OC75W.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),kt=()=>h(()=>import("./DONczftd.js"),__vite__mapDeps([6,1,2,7,8]),import.meta.url),Mt=()=>h(()=>import("./DGFYpgip.js"),__vite__mapDeps([9,1,2,7,10]),import.meta.url),$t=()=>h(()=>import("./DHqsUO8m.js"),__vite__mapDeps([11,1,2,12]),import.meta.url),Ft=()=>h(()=>import("./Dau8o3hy.js"),__vite__mapDeps([13,1,2,14]),import.meta.url),Nt=()=>h(()=>import("./DAoEDWOQ.js").then(t=>t.aX),__vite__mapDeps([1,2]),import.meta.url),Ht=()=>h(()=>import("./CjxK8I6e.js"),__vite__mapDeps([15,1,2,16]),import.meta.url),qt=()=>h(()=>import("./CyR7obyd.js"),__vite__mapDeps([17,1,2,18]),import.meta.url),Ut=()=>h(()=>import("./C954cVyZ.js"),__vite__mapDeps([19,1,2,20]),import.meta.url),G=["ZhiluHeader","ProseBlockquote","ProseEm","ProseH1","ProseH2","ProseH3","ProseH4","ProseH5","ProseH6","ProseHr","ProseImg","ProseLi","ProseOl","ProseP","ProseScript","ProseStrong","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","Icon"],J=["Alert","Blur","LinkCard","Pic","ProseA","ProseCode","ProsePre","ProseTable","Quote","Tip"],zt=Object.freeze(Object.defineProperty({__proto__:null,Alert:Lt,Blur:Vt,LinkCard:kt,Pic:Mt,ProseA:$t,ProseCode:Ft,ProsePre:Nt,ProseTable:Ht,Quote:qt,Tip:Ut,globalComponents:G,localComponents:J},Symbol.toStringTag,{value:"Module"})),Jt={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(t){const r=["render","ssrRender","__ssrInlineRender"],e=t,n=!1,o=P(()=>{let s=e.value.body||e.value;return e.excerpt&&e.value.excerpt&&(s=e.value.excerpt),s.type==="minimal"||s.type==="minimark"?dt({value:s.value}):s}),i=P(()=>!o.value?.children?.length),l=P(()=>{const{body:s,excerpt:f,...m}=e.value;return{...m,...e.data}}),c=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(s=>[s,`prose-${s}`])),{mdc:p}=ot().public||{},a=P(()=>({...p?.components?.prose&&e.prose!==!1?c:{},...p?.components?.map||{},...k(e.data?.mdc?.components||{}),...e.components})),u=P(()=>o.value?_(o.value,{tags:a.value}):{});function d(s){let f=s;if(typeof s=="string"){if(x.includes(s))return s;if(G.includes(C(s))?f=M(s,!1):J.includes(C(s))&&(f=R(()=>h(()=>Promise.resolve().then(()=>zt),void 0,import.meta.url).then(y=>{const b=y[C(s)];return b?b():void 0}))),typeof f=="string")return f}if(!f)return f;const m=f;return"__asyncLoader"in m?m:"setup"in m?R(()=>Promise.resolve(m)):m}function _(s,f){if(!s)return;const m=Array.from(new Set(g(s,f))),v={};for(const[y,b]of m)if(!v[y]){if(typeof b=="object"&&r.some(Z=>Object.hasOwnProperty.call(b,Z))){v[y]=b;continue}v[y]=d(b)}return v}function g(s,f){const m=s.tag;if(s.type==="text"||m==="binding"||s.type==="comment")return[];const v=T(s,f.tags),y=[];s.type!=="root"&&!x.includes(v)&&y.push([m,v]);for(const b of s.children||[])y.push(...g(b,f));return y}function T(s,f){const m=s.tag;return!m||typeof s.props?.__ignoreMap<"u"?m:f[m]||f[C(m)]||f[$(s.tag)]||m}return(s,f)=>i.value?it(s.$slots,"empty",{key:1,body:o.value,data:l.value,dataContentId:L(n)?t.value.id:void 0}):(F(),st(Bt,{key:0,body:o.value,data:l.value,class:at(e.class),tag:e.tag,prose:e.prose,unwrap:e.unwrap,components:u.value,"data-content-id":L(n)?t.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},Kt={class:"z-comment"},Wt=V({__name:"Comment",setup(t){const r=ut();return ct(()=>{window.twikoo?.init?.({envId:r.twikoo?.envId,el:"#twikoo"})}),(e,n)=>(F(),lt("section",Kt,n[0]||(n[0]=[E("h3",{class:"text-creative"}," 评论区 ",-1),E("div",{id:"twikoo"},[E("p",null,"评论加载中...")],-1)])))}}),Zt=Object.assign(pt(Wt,[["__scopeId","data-v-ffa4d685"]]),{__name:"PostComment"});export{Jt as _,Zt as a};
